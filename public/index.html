<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Matriarchs OS</title>
<link rel="stylesheet" href="index.css">
<script src="/scram/scramjet.all.js"></script>
<script src="/baremux/index.js"></script>
<script defer src="index.js"></script>

<style>
html, body {
  margin:0;
  padding:0;
  width:100%;
  height:100%;
  font-family:'Segoe UI', sans-serif;
  overflow:hidden;
  background: radial-gradient(circle at 50% 50%, #0a0a1f 0%, #000014 100%);
  background-size: cover;
}

/* Lock Screen */
#lockscreen {
  position: absolute;
  top:0; left:0; width:100%; height:100%;
  display:flex; justify-content:center; align-items:center;
  flex-direction: column;
  color:#fff;
  background: radial-gradient(circle at 50% 50%, #0a0a1f 0%, #000014 100%);
  z-index:9999;
}

#lockscreen input[type="password"] {
  padding:10px 15px;
  font-size:1rem;
  border-radius:8px;
  border:none;
  outline:none;
}

/* Desktop icons */
.desktop-icon {
  position:absolute;
  width:80px;
  text-align:center;
  color:#fff;
  cursor:pointer;
}
.desktop-icon img { width:48px; height:48px; }

/* Taskbar */
#taskbar {
  position:absolute;
  bottom:0; left:0; width:100%;
  height:40px;
  background:rgba(0,0,0,0.5);
  display:flex;
  align-items:center;
  padding:0 10px;
  font-weight:bold;
}
.taskbar-letter {
  margin:0 3px;
  display:inline-block;
  animation: bounce 1s infinite alternate;
}
@keyframes bounce {
  from { transform: translateY(0); }
  to { transform: translateY(-5px); }
}

/* Window */
.window {
  position:absolute;
  border:2px solid #555;
  background:#111;
  color:#fff;
  border-radius:6px;
  overflow:hidden;
  display:flex;
  flex-direction: column;
  z-index:10;
}
.window-header {
  background:#222;
  padding:5px 10px;
  cursor:move;
  user-select:none;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.window-body { flex:1; background:#111; overflow:auto; }

/* Start Menu */
#start-menu {
  position:absolute;
  bottom:40px;
  left:10px;
  width:200px;
  background:rgba(0,0,0,0.7);
  border-radius:6px;
  display:none;
  flex-direction:column;
  color:#fff;
}
.start-item {
  padding:8px 10px;
  cursor:pointer;
}
.start-item:hover { background:rgba(255,255,255,0.1); }
</style>
</head>
<body>

<!-- Lock Screen -->
<div id="lockscreen">
  <h1>Matriarchs OS</h1>
  <input type="password" id="password" placeholder="Enter Password">
  <button id="unlockBtn">Unlock</button>
</div>

<!-- Desktop Icons -->
<div class="desktop-icon" style="top:50px; left:50px;" onclick="openApp('browser')">
  <img src="icons/browser.png" alt="Browser"><br>Brave
</div>

<div class="desktop-icon" style="top:150px; left:50px;" onclick="openApp('gnmath')">
  <img src="icons/game.png" alt="GN Math"><br>GN Math
</div>

<!-- Taskbar -->
<div id="taskbar">
  <span class="taskbar-letter">M</span>
  <span class="taskbar-letter">A</span>
  <span class="taskbar-letter">T</span>
  <span class="taskbar-letter">R</span>
  <span class="taskbar-letter">I</span>
  <span class="taskbar-letter">A</span>
  <span class="taskbar-letter">R</span>
  <span class="taskbar-letter">C</span>
  <span class="taskbar-letter">H</span>
  <span class="taskbar-letter">S</span>
</div>

<!-- Start Menu -->
<div id="start-menu">
  <div class="start-item" onclick="openApp('browser')">Brave Browser</div>
  <div class="start-item" onclick="openApp('gnmath')">GN Math</div>
</div>

<script>
// ---------------- Lock screen
const lockscreen = document.getElementById("lockscreen");
const unlockBtn = document.getElementById("unlockBtn");
const passwordInput = document.getElementById("password");
const correctPassword = "matriarchs"; // Example password

unlockBtn.onclick = () => {
  if (passwordInput.value === correctPassword) {
    lockscreen.style.display = "none";
  } else {
    alert("Wrong password!");
  }
};

// ---------------- Start menu toggle
document.addEventListener("keydown", e => {
  if (e.key === "Meta") { // Windows/Command key
    const menu = document.getElementById("start-menu");
    menu.style.display = menu.style.display === "flex" ? "none" : "flex";
  }
});

// ---------------- Draggable Windows
function makeDraggable(el) {
  const header = el.querySelector(".window-header");
  let offsetX = 0, offsetY = 0, isDown = false;

  header.onmousedown = (e) => {
    isDown = true;
    offsetX = e.clientX - el.offsetLeft;
    offsetY = e.clientY - el.offsetTop;
    el.style.zIndex = ++topZ;
  };

  document.onmouseup = () => { isDown = false; };
  document.onmousemove = (e) => {
    if (!isDown) return;
    el.style.left = (e.clientX - offsetX) + "px";
    el.style.top = (e.clientY - offsetY) + "px";
  };
}
let topZ = 10;

// ---------------- Open apps
function openApp(app) {
  let win = document.createElement("div");
  win.className = "window";
  win.style.top = "100px";
  win.style.left = "100px";
  win.style.width = "800px";
  win.style.height = "600px";

  let header = document.createElement("div");
  header.className = "window-header";
  header.innerHTML = `<span>${app}</span><button onclick="this.parentNode.parentNode.remove()">âœ•</button>`;
  win.appendChild(header);

  let body = document.createElement("div");
  body.className = "window-body";

  if (app === "browser") {
    body.innerHTML = `<iframe src="/wisp/?url=https://search.brave.com" style="width:100%;height:100%;border:none;"></iframe>`;
  } else if (app === "gnmath") {
    body.innerHTML = `<iframe src="gn-math/index.html" style="width:100%;height:100%;border:none;"></iframe>`;
  }

  win.appendChild(body);
  document.body.appendChild(win);
  makeDraggable(win);
}
</script>

</body>
</html>
