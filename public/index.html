<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Matriarchs OS</title>

<link rel="shortcut icon" href="favicon.webp" />

<!-- Scramjet backend scripts (DO NOT REMOVE) -->
<script src="/scram/scramjet.all.js"></script>
<script src="/baremux/index.js"></script>
<script src="register-sw.js" defer></script>
<script src="search.js" defer></script>
<script src="index.js" defer></script>

<style>
* { margin:0; padding:0; box-sizing:border-box; font-family:'Segoe UI',sans-serif; }

body {
  height:100vh;
  overflow:hidden;
  background:linear-gradient(135deg,#111,#1a1a2e);
  color:white;
}

/* Desktop */
#desktop {
  position:absolute;
  top:0;
  left:0;
  right:0;
  bottom:50px;
  padding:20px;
  display:flex;
  flex-wrap:wrap;
  gap:20px;
}

.desktop-icon {
  width:80px;
  text-align:center;
  cursor:pointer;
}

.desktop-icon img {
  width:48px;
  height:48px;
  margin-bottom:5px;
}

/* Taskbar */
#taskbar {
  position:absolute;
  bottom:0;
  left:0;
  right:0;
  height:50px;
  background:#151525;
  display:flex;
  align-items:center;
  padding:0 10px;
}

#start-btn {
  background:#27293d;
  padding:8px 14px;
  border-radius:6px;
  cursor:pointer;
}

#start-menu {
  position:absolute;
  bottom:50px;
  left:10px;
  width:220px;
  background:#1e1e2f;
  border-radius:10px;
  padding:15px;
  display:none;
}

.menu-item {
  padding:8px;
  cursor:pointer;
}

.menu-item:hover {
  background:#27293d;
}

/* Hide original browser UI */
#matriarchs-browser {
  display:none;
}
</style>
</head>

<body>

<!-- ORIGINAL SCRAMJET FORM (HIDDEN BUT REQUIRED) -->
<div id="matriarchs-browser">
  <form id="sj-form">
    <input id="sj-search-engine" type="hidden" value="https://www.google.com/search?q=%s">
    <input id="sj-address" type="text">
  </form>
</div>

<!-- DESKTOP -->
<div id="desktop"></div>

<!-- START MENU -->
<div id="start-menu">
  <div class="menu-item" onclick="launchSite('https://youtube.com')">YouTube</div>
  <div class="menu-item" onclick="launchSite('https://tiktok.com')">TikTok</div>
  <div class="menu-item" onclick="launchSite('https://google.com')">Google</div>
</div>

<!-- TASKBAR -->
<div id="taskbar">
  <div id="start-btn" onclick="toggleStart()">Start</div>
</div>

<script>
function toggleStart(){
  const m = document.getElementById("start-menu");
  m.style.display = m.style.display === "block" ? "none" : "block";
}

/* THIS is the magic */
function launchSite(url){
  const input = document.getElementById("sj-address");
  const form = document.getElementById("sj-form");

  input.value = url;

  // Submit Scramjet form properly
  form.dispatchEvent(new Event("submit", { bubbles:true, cancelable:true }));
}

/* Desktop icons */
function addIcon(name, url){
  const icon = document.createElement("div");
  icon.className="desktop-icon";
  icon.innerHTML=`
    <img src="https://cdn-icons-png.flaticon.com/512/888/888879.png">
    <div>${name}</div>
  `;
  icon.onclick=()=>launchSite(url);
  document.getElementById("desktop").appendChild(icon);
}

addIcon("YouTube","https://youtube.com");
addIcon("TikTok","https://tiktok.com");
addIcon("Google","https://google.com");
</script>

</body>
</html>
